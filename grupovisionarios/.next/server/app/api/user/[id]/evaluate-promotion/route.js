"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/[id]/evaluate-promotion/route";
exports.ids = ["app/api/user/[id]/evaluate-promotion/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute.ts&appDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute.ts&appDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_grupo_visionarios_grupovisionarios_src_app_api_user_id_evaluate_promotion_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/user/[id]/evaluate-promotion/route.ts */ \"(rsc)/./src/app/api/user/[id]/evaluate-promotion/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/[id]/evaluate-promotion/route\",\n        pathname: \"/api/user/[id]/evaluate-promotion\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/[id]/evaluate-promotion/route\"\n    },\n    resolvedPagePath: \"C:\\\\grupo-visionarios\\\\grupovisionarios\\\\src\\\\app\\\\api\\\\user\\\\[id]\\\\evaluate-promotion\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_grupo_visionarios_grupovisionarios_src_app_api_user_id_evaluate_promotion_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user/[id]/evaluate-promotion/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyJTJGJTVCaWQlNUQlMkZldmFsdWF0ZS1wcm9tb3Rpb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVzZXIlMkYlNUJpZCU1RCUyRmV2YWx1YXRlLXByb21vdGlvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVzZXIlMkYlNUJpZCU1RCUyRmV2YWx1YXRlLXByb21vdGlvbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDZ3J1cG8tdmlzaW9uYXJpb3MlNUNncnVwb3Zpc2lvbmFyaW9zJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDZ3J1cG8tdmlzaW9uYXJpb3MlNUNncnVwb3Zpc2lvbmFyaW9zJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnRDtBQUM3SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dydXBvdmlzaW9uYXJpb3MvPzcxNjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcZ3J1cG8tdmlzaW9uYXJpb3NcXFxcZ3J1cG92aXNpb25hcmlvc1xcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx1c2VyXFxcXFtpZF1cXFxcZXZhbHVhdGUtcHJvbW90aW9uXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyL1tpZF0vZXZhbHVhdGUtcHJvbW90aW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlci9baWRdL2V2YWx1YXRlLXByb21vdGlvblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXNlci9baWRdL2V2YWx1YXRlLXByb21vdGlvbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXGdydXBvLXZpc2lvbmFyaW9zXFxcXGdydXBvdmlzaW9uYXJpb3NcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcdXNlclxcXFxbaWRdXFxcXGV2YWx1YXRlLXByb21vdGlvblxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXNlci9baWRdL2V2YWx1YXRlLXByb21vdGlvbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute.ts&appDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/user/[id]/evaluate-promotion/route.ts":
/*!***********************************************************!*\
  !*** ./src/app/api/user/[id]/evaluate-promotion/route.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_multilevel_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/multilevel-system */ \"(rsc)/./src/lib/multilevel-system.ts\");\n\n\nasync function GET(request, { params }) {\n    try {\n        const userId = params.id;\n        // Obtener información real del nivel del usuario\n        const levelInfo = await (0,_lib_multilevel_system__WEBPACK_IMPORTED_MODULE_1__.getUserLevelInfo)(userId);\n        if (!levelInfo) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Usuario no encontrado o sin nivel asignado\"\n            }, {\n                status: 404\n            });\n        }\n        // Formatear la respuesta para el frontend\n        const response = {\n            success: true,\n            currentLevel: {\n                id: levelInfo.currentLevel.id,\n                name: levelInfo.currentLevel.name,\n                icon: levelInfo.currentLevel.icon,\n                color: levelInfo.currentLevel.color,\n                order: levelInfo.currentLevel.order,\n                commissionRate: Number(levelInfo.currentLevel.commissionRate),\n                requirementsDescription: levelInfo.currentLevel.requirementsDescription,\n                requirements: {\n                    referrals: levelInfo.currentLevel.minDirectReferrals || 3,\n                    earnings: 0 // Por ahora no tenemos requisitos de ganancias\n                }\n            },\n            nextLevel: levelInfo.nextLevel ? {\n                id: levelInfo.nextLevel.id,\n                name: levelInfo.nextLevel.name,\n                icon: levelInfo.nextLevel.icon,\n                color: levelInfo.nextLevel.color,\n                order: levelInfo.nextLevel.order,\n                commissionRate: Number(levelInfo.nextLevel.commissionRate),\n                requirementsDescription: levelInfo.nextLevel.requirementsDescription,\n                requirements: {\n                    referrals: levelInfo.nextLevel.minDirectReferrals || 3,\n                    earnings: 0\n                }\n            } : null,\n            directReferrals: levelInfo.evaluation.directReferrals || 0,\n            validSecondLevelReferrals: levelInfo.evaluation.validSecondLevelReferrals || 0,\n            canPromote: levelInfo.evaluation.canPromote || false,\n            requiredStructure: levelInfo.evaluation.requiredStructure || \"3 referidos directos + 9 referidos indirectos (3x3)\",\n            missingRequirements: levelInfo.evaluation.missingRequirements || [],\n            progress: {\n                referrals: levelInfo.evaluation.directReferrals || 0,\n                earnings: 0 // Por ahora no tenemos datos de ganancias\n            }\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error(\"Error evaluating promotion:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Error interno del servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91c2VyL1tpZF0vZXZhbHVhdGUtcHJvbW90aW9uL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNHO0FBRW5ELGVBQWVFLElBQ3BCQyxPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQThCO0lBRXRDLElBQUk7UUFDRixNQUFNQyxTQUFTRCxPQUFPRSxFQUFFO1FBRXhCLGlEQUFpRDtRQUNqRCxNQUFNQyxZQUFZLE1BQU1OLHdFQUFnQkEsQ0FBQ0k7UUFFekMsSUFBSSxDQUFDRSxXQUFXO1lBQ2QsT0FBT1AscURBQVlBLENBQUNRLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBNkMsR0FDdEU7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDBDQUEwQztRQUMxQyxNQUFNQyxXQUFXO1lBQ2ZILFNBQVM7WUFDVEksY0FBYztnQkFDWlAsSUFBSUMsVUFBVU0sWUFBWSxDQUFDUCxFQUFFO2dCQUM3QlEsTUFBTVAsVUFBVU0sWUFBWSxDQUFDQyxJQUFJO2dCQUNqQ0MsTUFBTVIsVUFBVU0sWUFBWSxDQUFDRSxJQUFJO2dCQUNqQ0MsT0FBT1QsVUFBVU0sWUFBWSxDQUFDRyxLQUFLO2dCQUNuQ0MsT0FBT1YsVUFBVU0sWUFBWSxDQUFDSSxLQUFLO2dCQUNuQ0MsZ0JBQWdCQyxPQUFPWixVQUFVTSxZQUFZLENBQUNLLGNBQWM7Z0JBQzVERSx5QkFBeUJiLFVBQVVNLFlBQVksQ0FBQ08sdUJBQXVCO2dCQUN2RUMsY0FBYztvQkFDWkMsV0FBV2YsVUFBVU0sWUFBWSxDQUFDVSxrQkFBa0IsSUFBSTtvQkFDeERDLFVBQVUsRUFBRSwrQ0FBK0M7Z0JBQzdEO1lBQ0Y7WUFDQUMsV0FBV2xCLFVBQVVrQixTQUFTLEdBQUc7Z0JBQy9CbkIsSUFBSUMsVUFBVWtCLFNBQVMsQ0FBQ25CLEVBQUU7Z0JBQzFCUSxNQUFNUCxVQUFVa0IsU0FBUyxDQUFDWCxJQUFJO2dCQUM5QkMsTUFBTVIsVUFBVWtCLFNBQVMsQ0FBQ1YsSUFBSTtnQkFDOUJDLE9BQU9ULFVBQVVrQixTQUFTLENBQUNULEtBQUs7Z0JBQ2hDQyxPQUFPVixVQUFVa0IsU0FBUyxDQUFDUixLQUFLO2dCQUNoQ0MsZ0JBQWdCQyxPQUFPWixVQUFVa0IsU0FBUyxDQUFDUCxjQUFjO2dCQUN6REUseUJBQXlCYixVQUFVa0IsU0FBUyxDQUFDTCx1QkFBdUI7Z0JBQ3BFQyxjQUFjO29CQUNaQyxXQUFXZixVQUFVa0IsU0FBUyxDQUFDRixrQkFBa0IsSUFBSTtvQkFDckRDLFVBQVU7Z0JBQ1o7WUFDRixJQUFJO1lBQ0pFLGlCQUFpQm5CLFVBQVVvQixVQUFVLENBQUNELGVBQWUsSUFBSTtZQUN6REUsMkJBQTJCckIsVUFBVW9CLFVBQVUsQ0FBQ0MseUJBQXlCLElBQUk7WUFDN0VDLFlBQVl0QixVQUFVb0IsVUFBVSxDQUFDRSxVQUFVLElBQUk7WUFDL0NDLG1CQUFtQnZCLFVBQVVvQixVQUFVLENBQUNHLGlCQUFpQixJQUFJO1lBQzdEQyxxQkFBcUJ4QixVQUFVb0IsVUFBVSxDQUFDSSxtQkFBbUIsSUFBSSxFQUFFO1lBQ25FQyxVQUFVO2dCQUNSVixXQUFXZixVQUFVb0IsVUFBVSxDQUFDRCxlQUFlLElBQUk7Z0JBQ25ERixVQUFVLEVBQUUsMENBQTBDO1lBQ3hEO1FBQ0Y7UUFFQSxPQUFPeEIscURBQVlBLENBQUNRLElBQUksQ0FBQ0k7SUFDM0IsRUFBRSxPQUFPRixPQUFPO1FBQ2R1QixRQUFRdkIsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT1YscURBQVlBLENBQUNRLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQTZCLEdBQ3REO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3J1cG92aXNpb25hcmlvcy8uL3NyYy9hcHAvYXBpL3VzZXIvW2lkXS9ldmFsdWF0ZS1wcm9tb3Rpb24vcm91dGUudHM/YmYyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGdldFVzZXJMZXZlbEluZm8gfSBmcm9tICdAL2xpYi9tdWx0aWxldmVsLXN5c3RlbSdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXHJcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXHJcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHBhcmFtcy5pZFxyXG5cclxuICAgIC8vIE9idGVuZXIgaW5mb3JtYWNpw7NuIHJlYWwgZGVsIG5pdmVsIGRlbCB1c3VhcmlvXHJcbiAgICBjb25zdCBsZXZlbEluZm8gPSBhd2FpdCBnZXRVc2VyTGV2ZWxJbmZvKHVzZXJJZClcclxuXHJcbiAgICBpZiAoIWxldmVsSW5mbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVc3VhcmlvIG5vIGVuY29udHJhZG8gbyBzaW4gbml2ZWwgYXNpZ25hZG8nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBGb3JtYXRlYXIgbGEgcmVzcHVlc3RhIHBhcmEgZWwgZnJvbnRlbmRcclxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBjdXJyZW50TGV2ZWw6IHtcclxuICAgICAgICBpZDogbGV2ZWxJbmZvLmN1cnJlbnRMZXZlbC5pZCxcclxuICAgICAgICBuYW1lOiBsZXZlbEluZm8uY3VycmVudExldmVsLm5hbWUsXHJcbiAgICAgICAgaWNvbjogbGV2ZWxJbmZvLmN1cnJlbnRMZXZlbC5pY29uLFxyXG4gICAgICAgIGNvbG9yOiBsZXZlbEluZm8uY3VycmVudExldmVsLmNvbG9yLFxyXG4gICAgICAgIG9yZGVyOiBsZXZlbEluZm8uY3VycmVudExldmVsLm9yZGVyLFxyXG4gICAgICAgIGNvbW1pc3Npb25SYXRlOiBOdW1iZXIobGV2ZWxJbmZvLmN1cnJlbnRMZXZlbC5jb21taXNzaW9uUmF0ZSksXHJcbiAgICAgICAgcmVxdWlyZW1lbnRzRGVzY3JpcHRpb246IGxldmVsSW5mby5jdXJyZW50TGV2ZWwucmVxdWlyZW1lbnRzRGVzY3JpcHRpb24sXHJcbiAgICAgICAgcmVxdWlyZW1lbnRzOiB7XHJcbiAgICAgICAgICByZWZlcnJhbHM6IGxldmVsSW5mby5jdXJyZW50TGV2ZWwubWluRGlyZWN0UmVmZXJyYWxzIHx8IDMsXHJcbiAgICAgICAgICBlYXJuaW5nczogMCAvLyBQb3IgYWhvcmEgbm8gdGVuZW1vcyByZXF1aXNpdG9zIGRlIGdhbmFuY2lhc1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbmV4dExldmVsOiBsZXZlbEluZm8ubmV4dExldmVsID8ge1xyXG4gICAgICAgIGlkOiBsZXZlbEluZm8ubmV4dExldmVsLmlkLFxyXG4gICAgICAgIG5hbWU6IGxldmVsSW5mby5uZXh0TGV2ZWwubmFtZSxcclxuICAgICAgICBpY29uOiBsZXZlbEluZm8ubmV4dExldmVsLmljb24sXHJcbiAgICAgICAgY29sb3I6IGxldmVsSW5mby5uZXh0TGV2ZWwuY29sb3IsXHJcbiAgICAgICAgb3JkZXI6IGxldmVsSW5mby5uZXh0TGV2ZWwub3JkZXIsXHJcbiAgICAgICAgY29tbWlzc2lvblJhdGU6IE51bWJlcihsZXZlbEluZm8ubmV4dExldmVsLmNvbW1pc3Npb25SYXRlKSxcclxuICAgICAgICByZXF1aXJlbWVudHNEZXNjcmlwdGlvbjogbGV2ZWxJbmZvLm5leHRMZXZlbC5yZXF1aXJlbWVudHNEZXNjcmlwdGlvbixcclxuICAgICAgICByZXF1aXJlbWVudHM6IHtcclxuICAgICAgICAgIHJlZmVycmFsczogbGV2ZWxJbmZvLm5leHRMZXZlbC5taW5EaXJlY3RSZWZlcnJhbHMgfHwgMyxcclxuICAgICAgICAgIGVhcm5pbmdzOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICB9IDogbnVsbCxcclxuICAgICAgZGlyZWN0UmVmZXJyYWxzOiBsZXZlbEluZm8uZXZhbHVhdGlvbi5kaXJlY3RSZWZlcnJhbHMgfHwgMCxcclxuICAgICAgdmFsaWRTZWNvbmRMZXZlbFJlZmVycmFsczogbGV2ZWxJbmZvLmV2YWx1YXRpb24udmFsaWRTZWNvbmRMZXZlbFJlZmVycmFscyB8fCAwLFxyXG4gICAgICBjYW5Qcm9tb3RlOiBsZXZlbEluZm8uZXZhbHVhdGlvbi5jYW5Qcm9tb3RlIHx8IGZhbHNlLFxyXG4gICAgICByZXF1aXJlZFN0cnVjdHVyZTogbGV2ZWxJbmZvLmV2YWx1YXRpb24ucmVxdWlyZWRTdHJ1Y3R1cmUgfHwgJzMgcmVmZXJpZG9zIGRpcmVjdG9zICsgOSByZWZlcmlkb3MgaW5kaXJlY3RvcyAoM3gzKScsXHJcbiAgICAgIG1pc3NpbmdSZXF1aXJlbWVudHM6IGxldmVsSW5mby5ldmFsdWF0aW9uLm1pc3NpbmdSZXF1aXJlbWVudHMgfHwgW10sXHJcbiAgICAgIHByb2dyZXNzOiB7XHJcbiAgICAgICAgcmVmZXJyYWxzOiBsZXZlbEluZm8uZXZhbHVhdGlvbi5kaXJlY3RSZWZlcnJhbHMgfHwgMCxcclxuICAgICAgICBlYXJuaW5nczogMCAvLyBQb3IgYWhvcmEgbm8gdGVuZW1vcyBkYXRvcyBkZSBnYW5hbmNpYXNcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBwcm9tb3Rpb246JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRVc2VyTGV2ZWxJbmZvIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsInVzZXJJZCIsImlkIiwibGV2ZWxJbmZvIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInJlc3BvbnNlIiwiY3VycmVudExldmVsIiwibmFtZSIsImljb24iLCJjb2xvciIsIm9yZGVyIiwiY29tbWlzc2lvblJhdGUiLCJOdW1iZXIiLCJyZXF1aXJlbWVudHNEZXNjcmlwdGlvbiIsInJlcXVpcmVtZW50cyIsInJlZmVycmFscyIsIm1pbkRpcmVjdFJlZmVycmFscyIsImVhcm5pbmdzIiwibmV4dExldmVsIiwiZGlyZWN0UmVmZXJyYWxzIiwiZXZhbHVhdGlvbiIsInZhbGlkU2Vjb25kTGV2ZWxSZWZlcnJhbHMiLCJjYW5Qcm9tb3RlIiwicmVxdWlyZWRTdHJ1Y3R1cmUiLCJtaXNzaW5nUmVxdWlyZW1lbnRzIiwicHJvZ3Jlc3MiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/user/[id]/evaluate-promotion/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/multilevel-system.ts":
/*!**************************************!*\
  !*** ./src/lib/multilevel-system.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   evaluateUserPromotion: () => (/* binding */ evaluateUserPromotion),\n/* harmony export */   getDirectReferrals: () => (/* binding */ getDirectReferrals),\n/* harmony export */   getUserLevelInfo: () => (/* binding */ getUserLevelInfo),\n/* harmony export */   getUserReferralStructure: () => (/* binding */ getUserReferralStructure),\n/* harmony export */   hasThreeReferralsEach: () => (/* binding */ hasThreeReferralsEach),\n/* harmony export */   promoteUser: () => (/* binding */ promoteUser),\n/* harmony export */   registerReferralAndEvaluate: () => (/* binding */ registerReferralAndEvaluate)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/**\r\n * Get direct referrals for a user\r\n */ async function getDirectReferrals(userId) {\n    try {\n        const referrals = await prisma.user.findMany({\n            where: {\n                referredBy: userId,\n                isActive: true\n            },\n            include: {\n                level: true,\n                referrals: {\n                    where: {\n                        isActive: true\n                    },\n                    select: {\n                        id: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        return referrals.map((user)=>({\n                ...user,\n                referralCount: user.referrals.length\n            }));\n    } catch (error) {\n        console.error(\"Error fetching direct referrals:\", error);\n        return [];\n    }\n}\n/**\r\n * Check if each of the 3 direct referrals has at least 3 referrals\r\n */ async function hasThreeReferralsEach(referrals) {\n    if (referrals.length < 3) return false;\n    // Check the first 3 referrals (most important ones)\n    const firstThreeReferrals = referrals.slice(0, 3);\n    for (const referral of firstThreeReferrals){\n        const referralCount = await prisma.user.count({\n            where: {\n                referredBy: referral.id,\n                isActive: true\n            }\n        });\n        if (referralCount < 3) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\r\n * Get the complete referral structure for a user (tree format)\r\n */ async function getUserReferralStructure(userId, maxDepth = 3) {\n    try {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                level: true\n            }\n        });\n        if (!user) return null;\n        if (!user.level) {\n            throw new Error(\"El usuario no tiene nivel asignado\");\n        }\n        const directReferrals = await getDirectReferralsRecursive(userId, maxDepth);\n        return {\n            id: user.id,\n            name: user.name,\n            email: user.email,\n            level: {\n                id: user.level.id,\n                name: user.level.name,\n                order: user.level.order,\n                color: user.level.color,\n                icon: user.level.icon ?? null\n            },\n            directReferrals,\n            referralCount: directReferrals.length,\n            isActive: user.isActive,\n            joinDate: user.createdAt\n        };\n    } catch (error) {\n        console.error(\"Error fetching user referral structure:\", error);\n        return null;\n    }\n}\n/**\r\n * Helper function to get referrals recursively\r\n */ async function getDirectReferralsRecursive(userId, depth) {\n    if (depth <= 0) return [];\n    const referrals = await prisma.user.findMany({\n        where: {\n            referredBy: userId,\n            isActive: true\n        },\n        include: {\n            level: true\n        },\n        orderBy: {\n            createdAt: \"desc\"\n        }\n    });\n    const result = [];\n    for (const referral of referrals){\n        const childReferrals = await getDirectReferralsRecursive(referral.id, depth - 1);\n        result.push({\n            id: referral.id,\n            name: referral.name,\n            email: referral.email,\n            level: {\n                id: referral.level.id,\n                name: referral.level.name,\n                order: referral.level.order,\n                color: referral.level.color,\n                icon: referral.level.icon ?? null\n            },\n            directReferrals: childReferrals,\n            referralCount: childReferrals.length,\n            isActive: referral.isActive,\n            joinDate: referral.createdAt\n        });\n    }\n    return result;\n}\n/**\r\n * Evaluate if a user can be promoted to the next level\r\n */ async function evaluateUserPromotion(userId) {\n    try {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                level: true\n            }\n        });\n        if (!user) {\n            throw new Error(\"User not found\");\n        }\n        if (!user.level) {\n            throw new Error(\"User does not have an assigned level\");\n        }\n        const directReferrals = await getDirectReferrals(userId);\n        const directReferralsCount = directReferrals.length;\n        // Check if user has at least 3 direct referrals\n        if (directReferralsCount < 3) {\n            return {\n                canPromote: false,\n                currentLevel: user.level.order,\n                directReferrals: directReferralsCount,\n                validSecondLevelReferrals: 0,\n                requiredStructure: \"3 referidos directos + 9 referidos indirectos (3x3)\",\n                missingRequirements: [\n                    `Necesitas ${3 - directReferralsCount} referidos directos más`\n                ]\n            };\n        }\n        // Check if the first 3 referrals each have at least 3 referrals (3x3 structure)\n        const hasValidStructure = await hasThreeReferralsEach(directReferrals);\n        if (!hasValidStructure) {\n            // Count how many of the first 3 have valid structures\n            const firstThree = directReferrals.slice(0, 3);\n            let validCount = 0;\n            const missingRequirements = [];\n            for(let i = 0; i < firstThree.length; i++){\n                const referralCount = await prisma.user.count({\n                    where: {\n                        referredBy: firstThree[i].id,\n                        isActive: true\n                    }\n                });\n                if (referralCount >= 3) {\n                    validCount++;\n                } else {\n                    missingRequirements.push(`${firstThree[i].name} necesita ${3 - referralCount} referidos más`);\n                }\n            }\n            return {\n                canPromote: false,\n                currentLevel: user.level.order,\n                directReferrals: directReferralsCount,\n                validSecondLevelReferrals: validCount,\n                requiredStructure: \"3 referidos directos + 9 referidos indirectos (3x3)\",\n                missingRequirements\n            };\n        }\n        // Get next level\n        const nextLevel = await prisma.level.findFirst({\n            where: {\n                order: user.level.order + 1\n            }\n        });\n        return {\n            canPromote: true,\n            currentLevel: user.level.order,\n            nextLevel: nextLevel?.order,\n            directReferrals: directReferralsCount,\n            validSecondLevelReferrals: 3,\n            requiredStructure: \"3 referidos directos + 9 referidos indirectos (3x3)\"\n        };\n    } catch (error) {\n        console.error(\"Error evaluating user promotion:\", error);\n        throw error;\n    }\n}\n/**\r\n * Promote user to the next level\r\n */ async function promoteUser(userId) {\n    try {\n        const evaluation = await evaluateUserPromotion(userId);\n        if (!evaluation.canPromote) {\n            return {\n                success: false,\n                error: `No cumple los requisitos: ${evaluation.missingRequirements?.join(\", \")}`\n            };\n        }\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                level: true\n            }\n        });\n        if (!user) {\n            return {\n                success: false,\n                error: \"Usuario no encontrado\"\n            };\n        }\n        if (!user.level) {\n            return {\n                success: false,\n                error: \"El usuario no tiene nivel asignado\"\n            };\n        }\n        const nextLevel = await prisma.level.findFirst({\n            where: {\n                order: user.level.order + 1\n            }\n        });\n        if (!nextLevel) {\n            return {\n                success: false,\n                error: \"No hay siguiente nivel disponible\"\n            };\n        }\n        // Start transaction\n        const result = await prisma.$transaction(async (tx)=>{\n            // Update user level\n            const updatedUser = await tx.user.update({\n                where: {\n                    id: userId\n                },\n                data: {\n                    levelId: nextLevel.id\n                },\n                include: {\n                    level: true\n                }\n            });\n            // Create promotion record\n            await tx.promotion.create({\n                data: {\n                    userId,\n                    fromLevelId: user.level.id,\n                    toLevelId: nextLevel.id,\n                    reason: \"Promoci\\xf3n autom\\xe1tica\",\n                    metadata: {\n                        directReferrals: evaluation.directReferrals,\n                        validStructure: true\n                    }\n                }\n            });\n            return updatedUser;\n        });\n        return {\n            success: true,\n            newLevel: result.level\n        };\n    } catch (error) {\n        console.error(\"Error promoting user:\", error);\n        return {\n            success: false,\n            error: \"Error interno del servidor\"\n        };\n    }\n}\n/**\r\n * Register a new referral and check for automatic promotion\r\n */ async function registerReferralAndEvaluate(referrerId, referredUserId) {\n    try {\n        // Create referral record\n        const referral = await prisma.referral.create({\n            data: {\n                referrerId,\n                referredId: referredUserId,\n                level: 1,\n                commission: 0,\n                status: \"APPROVED\"\n            }\n        });\n        // Evaluate if referrer can be promoted\n        const evaluation = await evaluateUserPromotion(referrerId);\n        let promotionResult = null;\n        if (evaluation.canPromote) {\n            promotionResult = await promoteUser(referrerId);\n        }\n        return {\n            success: true,\n            referralCreated: true,\n            promotionEvaluated: true,\n            promoted: promotionResult?.success || false,\n            newLevel: promotionResult?.newLevel\n        };\n    } catch (error) {\n        console.error(\"Error registering referral and evaluating promotion:\", error);\n        return {\n            success: false,\n            referralCreated: false,\n            promotionEvaluated: false,\n            error: \"Error interno del servidor\"\n        };\n    }\n}\n/**\r\n * Get user's current level info with progress\r\n */ async function getUserLevelInfo(userId) {\n    try {\n        const user = await prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                level: true,\n                promotionHistory: {\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 5\n                }\n            }\n        });\n        if (!user) return null;\n        if (!user.level) {\n            throw new Error(\"El usuario no tiene nivel asignado\");\n        }\n        const evaluation = await evaluateUserPromotion(userId);\n        const nextLevel = await prisma.level.findFirst({\n            where: {\n                order: user.level.order + 1\n            }\n        });\n        return {\n            currentLevel: user.level,\n            nextLevel,\n            evaluation,\n            promotionHistory: user.promotionHistory,\n            canPromote: evaluation.canPromote\n        };\n    } catch (error) {\n        console.error(\"Error getting user level info:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUc7WUFDN0I7UUFDRjtRQUVBLE9BQU87WUFDTFcsY0FBY3hDLEtBQUtNLEtBQUs7WUFDeEIwQztZQUNBRztZQUNBNEIsa0JBQWtCL0UsS0FBSytFLGdCQUFnQjtZQUN2Q3hDLFlBQVlZLFdBQVdaLFVBQVU7UUFDbkM7SUFFRixFQUFFLE9BQU96QixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hELE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3J1cG92aXNpb25hcmlvcy8uL3NyYy9saWIvbXVsdGlsZXZlbC1zeXN0ZW0udHM/ZDU0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuLy8gVHlwZXMgZm9yIHRoZSBtdWx0aWxldmVsIHN5c3RlbVxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJSZWZlcnJhbFN0cnVjdHVyZSB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIG5hbWU6IHN0cmluZ1xyXG4gIGVtYWlsOiBzdHJpbmdcclxuICBsZXZlbDoge1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBvcmRlcjogbnVtYmVyXHJcbiAgICBjb2xvcjogc3RyaW5nXHJcbiAgICBpY29uOiBzdHJpbmcgfCBudWxsIC8vIGljb25vIHB1ZWRlIHNlciBudWxvIGVuIGxhIHRhYmxhIExldmVsXHJcbiAgfVxyXG4gIGRpcmVjdFJlZmVycmFsczogVXNlclJlZmVycmFsU3RydWN0dXJlW11cclxuICByZWZlcnJhbENvdW50OiBudW1iZXJcclxuICBpc0FjdGl2ZTogYm9vbGVhblxyXG4gIGpvaW5EYXRlOiBEYXRlXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvbW90aW9uRXZhbHVhdGlvbiB7XHJcbiAgY2FuUHJvbW90ZTogYm9vbGVhblxyXG4gIGN1cnJlbnRMZXZlbDogbnVtYmVyXHJcbiAgbmV4dExldmVsPzogbnVtYmVyXHJcbiAgZGlyZWN0UmVmZXJyYWxzOiBudW1iZXJcclxuICB2YWxpZFNlY29uZExldmVsUmVmZXJyYWxzOiBudW1iZXJcclxuICByZXF1aXJlZFN0cnVjdHVyZTogc3RyaW5nXHJcbiAgbWlzc2luZ1JlcXVpcmVtZW50cz86IHN0cmluZ1tdXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZGlyZWN0IHJlZmVycmFscyBmb3IgYSB1c2VyXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGlyZWN0UmVmZXJyYWxzKHVzZXJJZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlZmVycmFscyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgd2hlcmU6IHsgXHJcbiAgICAgICAgcmVmZXJyZWRCeTogdXNlcklkLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlIFxyXG4gICAgICB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgbGV2ZWw6IHRydWUsXHJcbiAgICAgICAgcmVmZXJyYWxzOiB7XHJcbiAgICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9LFxyXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gcmVmZXJyYWxzLm1hcCh1c2VyID0+ICh7XHJcbiAgICAgIC4uLnVzZXIsXHJcbiAgICAgIHJlZmVycmFsQ291bnQ6IHVzZXIucmVmZXJyYWxzLmxlbmd0aFxyXG4gICAgfSkpXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRpcmVjdCByZWZlcnJhbHM6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gW11cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBlYWNoIG9mIHRoZSAzIGRpcmVjdCByZWZlcnJhbHMgaGFzIGF0IGxlYXN0IDMgcmVmZXJyYWxzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzVGhyZWVSZWZlcnJhbHNFYWNoKHJlZmVycmFsczogYW55W10pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBpZiAocmVmZXJyYWxzLmxlbmd0aCA8IDMpIHJldHVybiBmYWxzZVxyXG5cclxuICAvLyBDaGVjayB0aGUgZmlyc3QgMyByZWZlcnJhbHMgKG1vc3QgaW1wb3J0YW50IG9uZXMpXHJcbiAgY29uc3QgZmlyc3RUaHJlZVJlZmVycmFscyA9IHJlZmVycmFscy5zbGljZSgwLCAzKVxyXG4gIFxyXG4gIGZvciAoY29uc3QgcmVmZXJyYWwgb2YgZmlyc3RUaHJlZVJlZmVycmFscykge1xyXG4gICAgY29uc3QgcmVmZXJyYWxDb3VudCA9IGF3YWl0IHByaXNtYS51c2VyLmNvdW50KHtcclxuICAgICAgd2hlcmU6IHsgXHJcbiAgICAgICAgcmVmZXJyZWRCeTogcmVmZXJyYWwuaWQsXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWUgXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGlmIChyZWZlcnJhbENvdW50IDwgMykge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHRydWVcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgY29tcGxldGUgcmVmZXJyYWwgc3RydWN0dXJlIGZvciBhIHVzZXIgKHRyZWUgZm9ybWF0KVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJSZWZlcnJhbFN0cnVjdHVyZSh1c2VySWQ6IHN0cmluZywgbWF4RGVwdGg6IG51bWJlciA9IDMpOiBQcm9taXNlPFVzZXJSZWZlcnJhbFN0cnVjdHVyZSB8IG51bGw+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBsZXZlbDogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghdXNlcikgcmV0dXJuIG51bGxcclxuICAgIGlmICghdXNlci5sZXZlbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VsIHVzdWFyaW8gbm8gdGllbmUgbml2ZWwgYXNpZ25hZG8nKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpcmVjdFJlZmVycmFscyA9IGF3YWl0IGdldERpcmVjdFJlZmVycmFsc1JlY3Vyc2l2ZSh1c2VySWQsIG1heERlcHRoKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICBsZXZlbDoge1xyXG4gICAgICAgIGlkOiB1c2VyLmxldmVsIS5pZCxcclxuICAgICAgICBuYW1lOiB1c2VyLmxldmVsIS5uYW1lLFxyXG4gICAgICAgIG9yZGVyOiB1c2VyLmxldmVsIS5vcmRlcixcclxuICAgICAgICBjb2xvcjogdXNlci5sZXZlbCEuY29sb3IsXHJcbiAgICAgICAgaWNvbjogdXNlci5sZXZlbCEuaWNvbiA/PyBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIGRpcmVjdFJlZmVycmFscyxcclxuICAgICAgcmVmZXJyYWxDb3VudDogZGlyZWN0UmVmZXJyYWxzLmxlbmd0aCxcclxuICAgICAgaXNBY3RpdmU6IHVzZXIuaXNBY3RpdmUsXHJcbiAgICAgIGpvaW5EYXRlOiB1c2VyLmNyZWF0ZWRBdFxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIHJlZmVycmFsIHN0cnVjdHVyZTonLCBlcnJvcilcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGdldCByZWZlcnJhbHMgcmVjdXJzaXZlbHlcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldERpcmVjdFJlZmVycmFsc1JlY3Vyc2l2ZSh1c2VySWQ6IHN0cmluZywgZGVwdGg6IG51bWJlcik6IFByb21pc2U8VXNlclJlZmVycmFsU3RydWN0dXJlW10+IHtcclxuICBpZiAoZGVwdGggPD0gMCkgcmV0dXJuIFtdXHJcblxyXG4gIGNvbnN0IHJlZmVycmFscyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgIHdoZXJlOiB7IFxyXG4gICAgICByZWZlcnJlZEJ5OiB1c2VySWQsXHJcbiAgICAgIGlzQWN0aXZlOiB0cnVlIFxyXG4gICAgfSxcclxuICAgIGluY2x1ZGU6IHtcclxuICAgICAgbGV2ZWw6IHRydWVcclxuICAgIH0sXHJcbiAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cclxuICB9KVxyXG5cclxuICBjb25zdCByZXN1bHQ6IFVzZXJSZWZlcnJhbFN0cnVjdHVyZVtdID0gW11cclxuICBcclxuICBmb3IgKGNvbnN0IHJlZmVycmFsIG9mIHJlZmVycmFscykge1xyXG4gICAgY29uc3QgY2hpbGRSZWZlcnJhbHMgPSBhd2FpdCBnZXREaXJlY3RSZWZlcnJhbHNSZWN1cnNpdmUocmVmZXJyYWwuaWQsIGRlcHRoIC0gMSlcclxuICAgIFxyXG4gICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICBpZDogcmVmZXJyYWwuaWQsXHJcbiAgICAgIG5hbWU6IHJlZmVycmFsLm5hbWUsXHJcbiAgICAgIGVtYWlsOiByZWZlcnJhbC5lbWFpbCxcclxuICAgICAgbGV2ZWw6IHtcclxuICAgICAgICBpZDogcmVmZXJyYWwubGV2ZWwhLmlkLFxyXG4gICAgICAgIG5hbWU6IHJlZmVycmFsLmxldmVsIS5uYW1lLFxyXG4gICAgICAgIG9yZGVyOiByZWZlcnJhbC5sZXZlbCEub3JkZXIsXHJcbiAgICAgICAgY29sb3I6IHJlZmVycmFsLmxldmVsIS5jb2xvcixcclxuICAgICAgICBpY29uOiByZWZlcnJhbC5sZXZlbCEuaWNvbiA/PyBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIGRpcmVjdFJlZmVycmFsczogY2hpbGRSZWZlcnJhbHMsXHJcbiAgICAgIHJlZmVycmFsQ291bnQ6IGNoaWxkUmVmZXJyYWxzLmxlbmd0aCxcclxuICAgICAgaXNBY3RpdmU6IHJlZmVycmFsLmlzQWN0aXZlLFxyXG4gICAgICBqb2luRGF0ZTogcmVmZXJyYWwuY3JlYXRlZEF0XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG4vKipcclxuICogRXZhbHVhdGUgaWYgYSB1c2VyIGNhbiBiZSBwcm9tb3RlZCB0byB0aGUgbmV4dCBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV2YWx1YXRlVXNlclByb21vdGlvbih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8UHJvbW90aW9uRXZhbHVhdGlvbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgaW5jbHVkZTogeyBsZXZlbDogdHJ1ZSB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJylcclxuICAgIH1cclxuICAgIGlmICghdXNlci5sZXZlbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZG9lcyBub3QgaGF2ZSBhbiBhc3NpZ25lZCBsZXZlbCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGlyZWN0UmVmZXJyYWxzID0gYXdhaXQgZ2V0RGlyZWN0UmVmZXJyYWxzKHVzZXJJZClcclxuICAgIGNvbnN0IGRpcmVjdFJlZmVycmFsc0NvdW50ID0gZGlyZWN0UmVmZXJyYWxzLmxlbmd0aFxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBhdCBsZWFzdCAzIGRpcmVjdCByZWZlcnJhbHNcclxuICAgIGlmIChkaXJlY3RSZWZlcnJhbHNDb3VudCA8IDMpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjYW5Qcm9tb3RlOiBmYWxzZSxcclxuICAgICAgICBjdXJyZW50TGV2ZWw6IHVzZXIubGV2ZWwhLm9yZGVyLFxyXG4gICAgICAgIGRpcmVjdFJlZmVycmFsczogZGlyZWN0UmVmZXJyYWxzQ291bnQsXHJcbiAgICAgICAgdmFsaWRTZWNvbmRMZXZlbFJlZmVycmFsczogMCxcclxuICAgICAgICByZXF1aXJlZFN0cnVjdHVyZTogJzMgcmVmZXJpZG9zIGRpcmVjdG9zICsgOSByZWZlcmlkb3MgaW5kaXJlY3RvcyAoM3gzKScsXHJcbiAgICAgICAgbWlzc2luZ1JlcXVpcmVtZW50czogW2BOZWNlc2l0YXMgJHszIC0gZGlyZWN0UmVmZXJyYWxzQ291bnR9IHJlZmVyaWRvcyBkaXJlY3RvcyBtw6FzYF1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCAzIHJlZmVycmFscyBlYWNoIGhhdmUgYXQgbGVhc3QgMyByZWZlcnJhbHMgKDN4MyBzdHJ1Y3R1cmUpXHJcbiAgICBjb25zdCBoYXNWYWxpZFN0cnVjdHVyZSA9IGF3YWl0IGhhc1RocmVlUmVmZXJyYWxzRWFjaChkaXJlY3RSZWZlcnJhbHMpXHJcbiAgICBcclxuICAgIGlmICghaGFzVmFsaWRTdHJ1Y3R1cmUpIHtcclxuICAgICAgLy8gQ291bnQgaG93IG1hbnkgb2YgdGhlIGZpcnN0IDMgaGF2ZSB2YWxpZCBzdHJ1Y3R1cmVzXHJcbiAgICAgIGNvbnN0IGZpcnN0VGhyZWUgPSBkaXJlY3RSZWZlcnJhbHMuc2xpY2UoMCwgMylcclxuICAgICAgbGV0IHZhbGlkQ291bnQgPSAwXHJcbiAgICAgIGNvbnN0IG1pc3NpbmdSZXF1aXJlbWVudHM6IHN0cmluZ1tdID0gW11cclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlyc3RUaHJlZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHJlZmVycmFsQ291bnQgPSBhd2FpdCBwcmlzbWEudXNlci5jb3VudCh7XHJcbiAgICAgICAgICB3aGVyZTogeyBcclxuICAgICAgICAgICAgcmVmZXJyZWRCeTogZmlyc3RUaHJlZVtpXS5pZCxcclxuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVmZXJyYWxDb3VudCA+PSAzKSB7XHJcbiAgICAgICAgICB2YWxpZENvdW50KytcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbWlzc2luZ1JlcXVpcmVtZW50cy5wdXNoKFxyXG4gICAgICAgICAgICBgJHtmaXJzdFRocmVlW2ldLm5hbWV9IG5lY2VzaXRhICR7MyAtIHJlZmVycmFsQ291bnR9IHJlZmVyaWRvcyBtw6FzYFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjYW5Qcm9tb3RlOiBmYWxzZSxcclxuICAgICAgICBjdXJyZW50TGV2ZWw6IHVzZXIubGV2ZWwhLm9yZGVyLFxyXG4gICAgICAgIGRpcmVjdFJlZmVycmFsczogZGlyZWN0UmVmZXJyYWxzQ291bnQsXHJcbiAgICAgICAgdmFsaWRTZWNvbmRMZXZlbFJlZmVycmFsczogdmFsaWRDb3VudCxcclxuICAgICAgICByZXF1aXJlZFN0cnVjdHVyZTogJzMgcmVmZXJpZG9zIGRpcmVjdG9zICsgOSByZWZlcmlkb3MgaW5kaXJlY3RvcyAoM3gzKScsXHJcbiAgICAgICAgbWlzc2luZ1JlcXVpcmVtZW50c1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IG5leHQgbGV2ZWxcclxuICAgIGNvbnN0IG5leHRMZXZlbCA9IGF3YWl0IHByaXNtYS5sZXZlbC5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZTogeyBcclxuICAgICAgICBvcmRlcjogdXNlci5sZXZlbCEub3JkZXIgKyAxXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2FuUHJvbW90ZTogdHJ1ZSxcclxuICAgICAgY3VycmVudExldmVsOiB1c2VyLmxldmVsIS5vcmRlcixcclxuICAgICAgbmV4dExldmVsOiBuZXh0TGV2ZWw/Lm9yZGVyLFxyXG4gICAgICBkaXJlY3RSZWZlcnJhbHM6IGRpcmVjdFJlZmVycmFsc0NvdW50LFxyXG4gICAgICB2YWxpZFNlY29uZExldmVsUmVmZXJyYWxzOiAzLFxyXG4gICAgICByZXF1aXJlZFN0cnVjdHVyZTogJzMgcmVmZXJpZG9zIGRpcmVjdG9zICsgOSByZWZlcmlkb3MgaW5kaXJlY3RvcyAoM3gzKSdcclxuICAgIH1cclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV2YWx1YXRpbmcgdXNlciBwcm9tb3Rpb246JywgZXJyb3IpXHJcbiAgICB0aHJvdyBlcnJvclxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFByb21vdGUgdXNlciB0byB0aGUgbmV4dCBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb21vdGVVc2VyKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG5ld0xldmVsPzogYW55OyBlcnJvcj86IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV2YWx1YXRpb24gPSBhd2FpdCBldmFsdWF0ZVVzZXJQcm9tb3Rpb24odXNlcklkKVxyXG4gICAgXHJcbiAgICBpZiAoIWV2YWx1YXRpb24uY2FuUHJvbW90ZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBgTm8gY3VtcGxlIGxvcyByZXF1aXNpdG9zOiAke2V2YWx1YXRpb24ubWlzc2luZ1JlcXVpcmVtZW50cz8uam9pbignLCAnKX1gXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgaW5jbHVkZTogeyBsZXZlbDogdHJ1ZSB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVc3VhcmlvIG5vIGVuY29udHJhZG8nIH1cclxuICAgIH1cclxuICAgIGlmICghdXNlci5sZXZlbCkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbCB1c3VhcmlvIG5vIHRpZW5lIG5pdmVsIGFzaWduYWRvJyB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV4dExldmVsID0gYXdhaXQgcHJpc21hLmxldmVsLmZpbmRGaXJzdCh7XHJcbiAgICAgIHdoZXJlOiB7IFxyXG4gICAgICAgIG9yZGVyOiB1c2VyLmxldmVsIS5vcmRlciArIDFcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIW5leHRMZXZlbCkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBoYXkgc2lndWllbnRlIG5pdmVsIGRpc3BvbmlibGUnIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGFydCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcclxuICAgICAgLy8gVXBkYXRlIHVzZXIgbGV2ZWxcclxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCB0eC51c2VyLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxyXG4gICAgICAgIGRhdGE6IHsgbGV2ZWxJZDogbmV4dExldmVsLmlkIH0sXHJcbiAgICAgICAgaW5jbHVkZTogeyBsZXZlbDogdHJ1ZSB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBDcmVhdGUgcHJvbW90aW9uIHJlY29yZFxyXG4gICAgICBhd2FpdCB0eC5wcm9tb3Rpb24uY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICBmcm9tTGV2ZWxJZDogdXNlci5sZXZlbCEuaWQsXHJcbiAgICAgICAgICB0b0xldmVsSWQ6IG5leHRMZXZlbC5pZCxcclxuICAgICAgICAgIHJlYXNvbjogJ1Byb21vY2nDs24gYXV0b23DoXRpY2EnLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgZGlyZWN0UmVmZXJyYWxzOiBldmFsdWF0aW9uLmRpcmVjdFJlZmVycmFscyxcclxuICAgICAgICAgICAgdmFsaWRTdHJ1Y3R1cmU6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICByZXR1cm4gdXBkYXRlZFVzZXJcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbmV3TGV2ZWw6IHJlc3VsdC5sZXZlbFxyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvbW90aW5nIHVzZXI6JywgZXJyb3IpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcidcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlciBhIG5ldyByZWZlcnJhbCBhbmQgY2hlY2sgZm9yIGF1dG9tYXRpYyBwcm9tb3Rpb25cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlclJlZmVycmFsQW5kRXZhbHVhdGUocmVmZXJyZXJJZDogc3RyaW5nLCByZWZlcnJlZFVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhblxyXG4gIHJlZmVycmFsQ3JlYXRlZDogYm9vbGVhblxyXG4gIHByb21vdGlvbkV2YWx1YXRlZDogYm9vbGVhblxyXG4gIHByb21vdGVkPzogYm9vbGVhblxyXG4gIG5ld0xldmVsPzogYW55XHJcbiAgZXJyb3I/OiBzdHJpbmdcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDcmVhdGUgcmVmZXJyYWwgcmVjb3JkXHJcbiAgICBjb25zdCByZWZlcnJhbCA9IGF3YWl0IHByaXNtYS5yZWZlcnJhbC5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgcmVmZXJyZXJJZCxcclxuICAgICAgICByZWZlcnJlZElkOiByZWZlcnJlZFVzZXJJZCxcclxuICAgICAgICBsZXZlbDogMSxcclxuICAgICAgICBjb21taXNzaW9uOiAwLCAvLyBXaWxsIGJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gbGV2ZWxcclxuICAgICAgICBzdGF0dXM6ICdBUFBST1ZFRCdcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBFdmFsdWF0ZSBpZiByZWZlcnJlciBjYW4gYmUgcHJvbW90ZWRcclxuICAgIGNvbnN0IGV2YWx1YXRpb24gPSBhd2FpdCBldmFsdWF0ZVVzZXJQcm9tb3Rpb24ocmVmZXJyZXJJZClcclxuICAgIGxldCBwcm9tb3Rpb25SZXN1bHQgPSBudWxsXHJcblxyXG4gICAgaWYgKGV2YWx1YXRpb24uY2FuUHJvbW90ZSkge1xyXG4gICAgICBwcm9tb3Rpb25SZXN1bHQgPSBhd2FpdCBwcm9tb3RlVXNlcihyZWZlcnJlcklkKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHJlZmVycmFsQ3JlYXRlZDogdHJ1ZSxcclxuICAgICAgcHJvbW90aW9uRXZhbHVhdGVkOiB0cnVlLFxyXG4gICAgICBwcm9tb3RlZDogcHJvbW90aW9uUmVzdWx0Py5zdWNjZXNzIHx8IGZhbHNlLFxyXG4gICAgICBuZXdMZXZlbDogcHJvbW90aW9uUmVzdWx0Py5uZXdMZXZlbFxyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVnaXN0ZXJpbmcgcmVmZXJyYWwgYW5kIGV2YWx1YXRpbmcgcHJvbW90aW9uOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIHJlZmVycmFsQ3JlYXRlZDogZmFsc2UsXHJcbiAgICAgIHByb21vdGlvbkV2YWx1YXRlZDogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVzZXIncyBjdXJyZW50IGxldmVsIGluZm8gd2l0aCBwcm9ncmVzc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJMZXZlbEluZm8odXNlcklkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXHJcbiAgICAgIGluY2x1ZGU6IHsgXHJcbiAgICAgICAgbGV2ZWw6IHRydWUsXHJcbiAgICAgICAgcHJvbW90aW9uSGlzdG9yeToge1xyXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxyXG4gICAgICAgICAgdGFrZTogNVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiBudWxsXHJcbiAgICBpZiAoIXVzZXIubGV2ZWwpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbCB1c3VhcmlvIG5vIHRpZW5lIG5pdmVsIGFzaWduYWRvJylcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZXZhbHVhdGlvbiA9IGF3YWl0IGV2YWx1YXRlVXNlclByb21vdGlvbih1c2VySWQpXHJcbiAgICBcclxuICAgIGNvbnN0IG5leHRMZXZlbCA9IGF3YWl0IHByaXNtYS5sZXZlbC5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZTogeyBcclxuICAgICAgICBvcmRlcjogdXNlci5sZXZlbCEub3JkZXIgKyAxXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3VycmVudExldmVsOiB1c2VyLmxldmVsISxcclxuICAgICAgbmV4dExldmVsLFxyXG4gICAgICBldmFsdWF0aW9uLFxyXG4gICAgICBwcm9tb3Rpb25IaXN0b3J5OiB1c2VyLnByb21vdGlvbkhpc3RvcnksXHJcbiAgICAgIGNhblByb21vdGU6IGV2YWx1YXRpb24uY2FuUHJvbW90ZVxyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGxldmVsIGluZm86JywgZXJyb3IpXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwiZ2V0RGlyZWN0UmVmZXJyYWxzIiwidXNlcklkIiwicmVmZXJyYWxzIiwidXNlciIsImZpbmRNYW55Iiwid2hlcmUiLCJyZWZlcnJlZEJ5IiwiaXNBY3RpdmUiLCJpbmNsdWRlIiwibGV2ZWwiLCJzZWxlY3QiLCJpZCIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJtYXAiLCJyZWZlcnJhbENvdW50IiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwiaGFzVGhyZWVSZWZlcnJhbHNFYWNoIiwiZmlyc3RUaHJlZVJlZmVycmFscyIsInNsaWNlIiwicmVmZXJyYWwiLCJjb3VudCIsImdldFVzZXJSZWZlcnJhbFN0cnVjdHVyZSIsIm1heERlcHRoIiwiZmluZFVuaXF1ZSIsIkVycm9yIiwiZGlyZWN0UmVmZXJyYWxzIiwiZ2V0RGlyZWN0UmVmZXJyYWxzUmVjdXJzaXZlIiwibmFtZSIsImVtYWlsIiwib3JkZXIiLCJjb2xvciIsImljb24iLCJqb2luRGF0ZSIsImRlcHRoIiwicmVzdWx0IiwiY2hpbGRSZWZlcnJhbHMiLCJwdXNoIiwiZXZhbHVhdGVVc2VyUHJvbW90aW9uIiwiZGlyZWN0UmVmZXJyYWxzQ291bnQiLCJjYW5Qcm9tb3RlIiwiY3VycmVudExldmVsIiwidmFsaWRTZWNvbmRMZXZlbFJlZmVycmFscyIsInJlcXVpcmVkU3RydWN0dXJlIiwibWlzc2luZ1JlcXVpcmVtZW50cyIsImhhc1ZhbGlkU3RydWN0dXJlIiwiZmlyc3RUaHJlZSIsInZhbGlkQ291bnQiLCJpIiwibmV4dExldmVsIiwiZmluZEZpcnN0IiwicHJvbW90ZVVzZXIiLCJldmFsdWF0aW9uIiwic3VjY2VzcyIsImpvaW4iLCIkdHJhbnNhY3Rpb24iLCJ0eCIsInVwZGF0ZWRVc2VyIiwidXBkYXRlIiwiZGF0YSIsImxldmVsSWQiLCJwcm9tb3Rpb24iLCJjcmVhdGUiLCJmcm9tTGV2ZWxJZCIsInRvTGV2ZWxJZCIsInJlYXNvbiIsIm1ldGFkYXRhIiwidmFsaWRTdHJ1Y3R1cmUiLCJuZXdMZXZlbCIsInJlZ2lzdGVyUmVmZXJyYWxBbmRFdmFsdWF0ZSIsInJlZmVycmVySWQiLCJyZWZlcnJlZFVzZXJJZCIsInJlZmVycmVkSWQiLCJjb21taXNzaW9uIiwic3RhdHVzIiwicHJvbW90aW9uUmVzdWx0IiwicmVmZXJyYWxDcmVhdGVkIiwicHJvbW90aW9uRXZhbHVhdGVkIiwicHJvbW90ZWQiLCJnZXRVc2VyTGV2ZWxJbmZvIiwicHJvbW90aW9uSGlzdG9yeSIsInRha2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/multilevel-system.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Fevaluate-promotion%2Froute.ts&appDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgrupo-visionarios%5Cgrupovisionarios&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();